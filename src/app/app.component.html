<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <div class="header-text">
        <h1>{{ title }}</h1>
        <p class="subtitle">Early Years Development Assessment Framework</p>
      </div>
      <div class="toolbar">
        <button
          mat-icon-button
          class="toolbar-button"
          (click)="printAssessment()"
          matTooltip="Print Assessment"
        >
          <mat-icon>print</mat-icon>
        </button>
      </div>
    </div>
  </header>

  @if (assessmentData) {
  <div class="tabs-container">
    <mat-tab-group
      mat-align-tabs="center"
      class="assessment-tabs"
      [(selectedIndex)]="selectedTabIndex"
      [style.--current-tab-color]="getCurrentTabColor()"
    >
      <!-- Home Tab -->
      <mat-tab label="Home">
        <div class="tab-content">
          <mat-card class="welcome-card">
            <mat-card-header>
              <mat-card-title>Welcome to the Assessment</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p>
                This assessment framework is designed to evaluate early years
                development across four key areas:
              </p>
              <div class="overview-grid">
                @for (section of assessmentData.assessment_framework.sections;
                track section.title; let i = $index) {
                <mat-card
                  class="overview-card clickable-card"
                  (click)="navigateToSection(i)"
                  [style.--section-primary]="
                    getSectionColor(section.title, 'primary')
                  "
                  [style.--section-light]="
                    getSectionColor(section.title, 'light')
                  "
                  [style.--section-hover]="
                    getSectionColor(section.title, 'hover')
                  "
                >
                  <mat-card-header>
                    <mat-card-title>{{ section.title }}</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <p>
                      {{ section.subsections.length }} subsections with
                      {{ getTotalQuestions(section) }} questions
                    </p>
                  </mat-card-content>
                </mat-card>
                }
              </div>
              <div class="scoring-info">
                <h3>Scoring System</h3>
                <div class="scoring-grid">
                  @for (score of getScoreValues(); track score.value) {
                  <div class="scoring-item">
                    <strong>{{ score.label }}</strong> ({{ score.value }} mark{{
                      score.value > 1 ? "s" : ""
                    }})
                    <br />
                    <small>{{ score.description }}</small>
                  </div>
                  }
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-tab>

      <!-- Assessment Section Tabs -->
      @for (section of assessmentData.assessment_framework.sections; track
      section.title) {
      <mat-tab [label]="section.title">
        <app-assessment-section
          [section]="section"
          [scoreValues]="getScoreValues()"
          [selectedScores]="selectedScores"
          [sectionColors]="sectionColors"
          (scoreSelected)="onScoreSelected($event)"
        >
        </app-assessment-section>
      </mat-tab>
      }
    </mat-tab-group>
  </div>
  } @if (!assessmentData) {
  <div class="loading">
    <p>Loading assessment data...</p>
  </div>
  }
</div>
