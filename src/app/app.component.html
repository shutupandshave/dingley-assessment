<div class="app-container">
  <header class="app-header">
    <h1>{{ title }}</h1>
    <p class="subtitle">Early Years Development Assessment Framework</p>
  </header>

  <div class="tabs-container" *ngIf="assessmentData">
    <mat-tab-group mat-align-tabs="center" class="assessment-tabs">

      <!-- Home Tab -->
      <mat-tab label="Home">
        <div class="tab-content">
          <mat-card class="welcome-card">
            <mat-card-header>
              <mat-card-title>Welcome to the Assessment</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p>This assessment framework is designed to evaluate early years development across four key areas:</p>
              <div class="overview-grid">
                <mat-card class="overview-card" *ngFor="let section of assessmentData.assessment_framework.sections">
                  <mat-card-header>
                    <mat-card-title>{{ section.title }}</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <p>{{ section.subsections.length }} subsections with {{ getTotalQuestions(section) }} questions</p>
                  </mat-card-content>
                </mat-card>
              </div>
              <div class="scoring-info">
                <h3>Scoring System</h3>
                <div class="scoring-grid">
                  <div class="scoring-item" *ngFor="let score of getScoreValues()">
                    <strong>{{ score.label }}</strong> ({{ score.value }} mark{{ score.value > 1 ? 's' : '' }})
                    <br>
                    <small>{{ score.description }}</small>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-tab>

      <!-- Assessment Section Tabs -->
      <mat-tab *ngFor="let section of assessmentData.assessment_framework.sections" [label]="section.title">
        <div class="tab-content">
          <mat-card class="section-card">
            <mat-card-header>
              <mat-card-title>{{ section.title }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="subsections">
                <mat-card class="subsection-card" *ngFor="let subsection of section.subsections">
                  <mat-card-header>
                    <mat-card-title>{{ subsection.title }}</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <div class="questions-list">
                      <div class="question-item" *ngFor="let question of subsection.questions">
                        <div class="question-content">
                          <span class="question-number">{{ question.id }}.</span>
                          <span class="question-text">{{ question.text }}</span>
                        </div>
                        <div class="scoring-buttons">
                          <button mat-stroked-button *ngFor="let score of getScoreValues()"
                            [class]="'score-' + score.label.toLowerCase()"
                            [class.selected]="isScoreSelected(question.id, score.label)"
                            (click)="selectScore(question.id, score.label)">
                            {{ score.label }}
                          </button>
                        </div>
                      </div>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-tab>

    </mat-tab-group>
  </div>

  <div class="loading" *ngIf="!assessmentData">
    <p>Loading assessment data...</p>
  </div>
</div>